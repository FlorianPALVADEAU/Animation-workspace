import React, { useEffect, useRef } from 'react'
import '../../../App.css';

function SVGDraw() {
    const path = useRef(null);

    useEffect(() => {
        const updatePath = () => {
            if (path.current) {
                const pathLength = path.current.getTotalLength();
                path.current.style.strokeDashArray = pathLength;
                path.current.style.strokeDashOffset = pathLength;
    
                const scrollPercentage = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
                const drawLength = pathLength * scrollPercentage;
                path.current.style = 'stroke-dasharray: ' + pathLength + '; stroke-dashoffset: ' + Math.max(0, pathLength - drawLength) + ';';
            }
        };
        updatePath();
        window.addEventListener('scroll', updatePath);

        return () => {
            window.removeEventListener('scroll', updatePath);
        };
    }, []);

    return (
            <div className='drawSVG'>
                <h3>SVG Drawing effect</h3>
                <div className="line-container">
                    <svg width="1275" height="3056" viewBox="0 0 1275 3056" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio='xMidYMax meet'>
                        <path ref={path}d="M577.501 0.5C577.501 352.1 577.501 462.667 577.501 474C517.667 513.333 376.601 576.1 291.001 512.5C184.001 433 114.501 570.5 113.001 582.5C111.501 594.5 64.5007 656 61.5007 758C60.334 777.833 67.2007 822.1 104.001 840.5C92.5008 803.667 76.4008 712.4 104.001 642C117.501 592.167 166.401 496.5 254.001 512.5C280.667 519 325.401 559.9 291.001 671.5C307.667 649.5 332.301 590 297.501 528C311.667 535.333 338.601 565.1 333.001 625.5C348.167 626.333 383.201 632.2 402.001 649C433.834 605 523.001 526.3 625.001 563.5C670.834 580.167 748.301 647.4 691.501 783C667.334 847 590.801 971.6 478.001 958C436.167 961.5 356.601 929.9 373.001 775.5C374.167 742.5 380.801 675.5 398.001 671.5C389.667 661.898 363.501 643.325 325.501 645.847C320.167 647.398 309.701 653.1 310.501 663.5C311.501 676.5 299.501 696.5 291.001 700.5C282.501 704.5 220.861 758.5 156.001 767C125.001 778 73.0008 815.2 113.001 876C130.501 896.5 167.301 937.5 174.501 937.5C175.834 930.333 177.701 912 174.501 896C197.001 895.167 245.801 902.3 261.001 937.5C262.001 939.333 258.001 942.9 234.001 942.5C204.001 942 249.001 968 261.001 969.5C273.001 971 326.001 976.5 344.501 906C348.001 883.833 334.801 832.8 254.001 806C229.667 796.333 177.801 780.4 165.001 794C154.001 800.667 135.301 825.2 148.501 870C161.701 914.8 182.001 955 190.501 969.5C188.334 970.833 182.101 972.7 174.501 969.5C165.001 965.5 175.001 958 156.001 958C148.334 977.167 130.101 1015.2 118.501 1014L104.001 1020C111.334 1025 133.801 1033.5 165.001 1027.5C168.167 1028.17 176.101 1031.4 182.501 1039C188.901 1046.6 274.167 1137.83 316.001 1182.5H301.001C255.167 1153 162.001 1094.1 156.001 1094.5C148.501 1095 98.0006 1093.5 86.0006 1099C74.0006 1104.5 85.0006 1022.5 112.501 1027.5C140.001 1032.5 138.001 1103 121.001 1112C104.001 1121 34.0006 1141.5 54.0006 1162C74.0006 1182.5 58.0004 1186.5 138.5 1196.5C219 1206.5 203 1191.5 215 1196.5C227 1201.5 292.001 1208.5 301.001 1202.5C310 1196.5 309 1191 288 1177.5C267 1164 210 1130 185 1125.5C160 1121 96.0004 1112.5 66.5004 1134C37.0004 1155.5 64.5004 1179 73.0004 1193C78.167 1203.33 86.5004 1225.9 78.5004 1233.5C68.5004 1243 44.0004 1218.5 44.5004 1215.5C44.9004 1213.1 41.6669 1201.83 40.0001 1196.5C38.3335 1200.5 35.2002 1212.3 36.0002 1227.5C37.0002 1246.5 38.0002 1288.5 22.0002 1303.5C6.3335 1331.33 -15.5998 1395.1 22.0002 1427.5C59.6002 1459.9 90.6667 1469.67 101.5 1470.5C128.032 1485.09 234.315 1518.36 447.731 1535.24C498.654 1543 590.2 1522.9 549 1380.5C507.8 1238.1 474.167 1172.83 462.5 1158C424.5 1129 356.5 896 384.5 732C391.333 684 435.6 584.9 558 572.5C597.333 565.333 646.2 584.3 527 717.5C519 732.167 526.501 764.3 620.501 775.5C714.5 786.7 766.667 778.167 781 772.5C737.833 759.833 628.2 732.5 535 724.5C418.5 714.5 723 776.5 761 772.5C799 768.5 523.5 724 529.5 728C535.5 732 671 769.904 708 771C745 772.096 834.5 783 744 768C653.5 753 522.5 728.5 551 741.5C579.5 754.5 809.5 785.5 774 768C738.5 750.5 550 727.5 579 738C608 748.5 732.5 779 718 768C703.5 757 588 737.345 612 743.5C636 749.655 719.501 780 691.501 763.5C663.5 747 517.5 719.446 556.5 733.5C595.5 747.554 732 775.129 730.5 768C729 760.871 529.5 747.5 529.5 736C529.5 724.5 559.5 713 587.5 717.5C615.5 722 670.5 719 757 743.5C843.5 768 1085 916 1118 915C1151 914 1159 927.5 1248.5 895C1261.83 893 1284.5 896.8 1268.5 928C1227 975.167 1143.5 1073.2 1141.5 1088C1139 1106.5 994 1287.5 994 1318C994 1348.5 853 1537.5 802.5 1522.5C766.167 1542.5 658.7 1574.5 519.5 1542.5C497.167 1544.5 455.9 1564.4 469.5 1628C486.5 1707.5 611 1987 672.5 2054.5C711.626 2097.44 764.097 2175.17 676.063 2277.87C623.24 2339.5 577.501 2410.66 577.501 2491.83V3056" stroke="black"/>
                    </svg>
                </div>
                <section className='one'>
                    <h4>Some cool suff here</h4>
                </section>
            </div>
    )
}

export default SVGDraw